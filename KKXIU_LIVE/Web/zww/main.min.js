var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),GameMap=function(t){function e(e,i,s){var o=t.call(this)||this;return o.animal=["gamebody_json.icon2","gamebody_json.icon10","gamebody_json.icon13","gamebody_json.icon11","gamebody_json.icon12","gamebody_json.icon6","gamebody_json.icon5","gamebody_json.icon7","gamebody_json.icon8","gamebody_json.icon9","gamebody_json.icon3","gamebody_json.icon4"],o.animales=new Array,o.twicedownflag=!0,o.pawprice=15,o.speed=.08,o.timeOnEnterFrame=0,o.hitanimal=!0,o.oneindex=new Array,o.isPawin=!1,o.paw=i,o.game=e,o.requestanimallist=s.result.itemlist,console.log(o.requestanimallist),o.addEventListener(egret.Event.ADDED_TO_STAGE,o.onAddToStage,o),o}return __extends(e,t),e.prototype.onAddToStage=function(t){for(var e=0;e<this.requestanimallist.length;e++){var i=new AnimalItem(1,this.requestanimallist[e].itemprice,this.animal[e],1,!0,this.paw,this,this.requestanimallist[e].itemid);this.addChild(i),i.y=Utils.stageHeight-309,i.x=i.getanimaldownwith()*-e+Utils.stageWith,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.downpaws,this),i.addlistener(),i.setAnimaltype(e),this.animales.push(i)}this.animaleStartX=this.animales[0].x,this.animaleEndY=this.animales[this.animales.length-1].x-this.animales[this.animales.length-1].width,this.shp=new egret.Shape,this.shp.graphics.beginFill(0,1),this.shp.graphics.drawRect(0,0,Utils.stageWith,Utils.stageHeight),this.shp.graphics.endFill(),this.addChild(this.shp),this.shp.alpha=.5,this.shp.$setVisible(!1),this.addEventListener(egret.Event.ENTER_FRAME,this.moveAnimal,this),this.timeOnEnterFrame=egret.getTimer(),this.uppricepaw=Utils.createBitmapByName("gamebody_json.111"),this.uppricepaw.anchorOffsetX=this.uppricepaw.width/2,this.uppricepaw.anchorOffsetY=this.uppricepaw.height/2},e.prototype.moveAnimal=function(){for(var t=egret.getTimer(),e=this.timeOnEnterFrame,i=t-e,s=0;s<this.animales.length;s++)if(this.animales[s].x+=this.speed*i,this.animales[s].x>=this.animaleStartX+300){var o=this.animales[s].x-this.animaleStartX;this.animales[s].x=this.animaleEndY+o,this.animales[s].$setVisible(!0)}this.timeOnEnterFrame=egret.getTimer()},e.prototype.hitAnmial=function(t,e,i){if(this.hitanimal){this.index=t,this.hitx=e,this.hity=i,this.oneindex.push(t);var s=this.animales[this.index];s.$setVisible(!1),this.hitAnimals=new AnimalItem(s.animalitemtype,s.scorenumberbase,s.animalstring,s.times,!1,this.paw,this,s.id),this.paw.pawhitanimal(this.hitAnimals.id),this.hitanimal=!1,this.endY=Math.round(600*Math.random()+220),this.addChild(this.hitAnimals),this.addChild(this.uppricepaw),this.uppricepaw.x=e+this.pawprice,this.uppricepaw.y=i,egret.Tween.get(this.uppricepaw).to({y:176},2500,egret.Ease.sineOut),this.hitAnimals.x=e-this.hitAnimals.getanimaldownwith()/2,this.hitAnimals.y=i-this.hitAnimals.getanimaldownhight()/2+60,egret.Tween.get(this.hitAnimals).to({y:120},2500,egret.Ease.sineOut),egret.Tween.get(this.hitAnimals).to({rotation:-15},500,egret.Ease.sineIn).to({rotation:0},500,egret.Ease.sineOut),this.addEventListener(egret.Event.ENTER_FRAME,this.setAnimalmove,this)}},e.prototype.setAnimalmove=function(){var t=this.paw.getisWin();this.isPawin=!0,1==t?this.hitAnimals.y<130&&(this.hitAnimals.removerlistener(),this.hitanimal=!0,this.removeChild(this.hitAnimals),this.removeChild(this.uppricepaw),this.successpaw(this.hitAnimals),this.removeEventListener(egret.Event.ENTER_FRAME,this.setAnimalmove,this),this.paw.sendapp()):0==t&&this.hitAnimals.y<this.endY&&(this.removeChild(this.uppricepaw),this.hitAnimals.removerlistener(),this.hitanimal=!0,egret.Tween.removeTweens(this.hitAnimals),egret.Tween.get(this.hitAnimals).to({y:this.endY+200,alpha:0},500,egret.Ease.sineIn),this.removeEventListener(egret.Event.ENTER_FRAME,this.setAnimalmove,this),this.paw.setisWin(0))},e.prototype.successpaw=function(t){this.su=new SuccessAnimals(t.animalitemtype,t.scorenumber,t.animalstring,1),this.addChild(this.su),this.su.x=Utils.stageWith/2-this.su.getanimalbgwith()/4,this.su.y=Utils.stageHeight-667-this.su.getanimalbghight()/2,this.su.scaleX=0,this.su.scaleY=0,this.shp.$setVisible(!0),egret.Tween.get(this.su).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).wait(1500).to({scaleX:0,scaleY:0,x:30,y:Utils.stageHeight+76},600,egret.Ease.sineIn).call(this.onComplete,this,[])},e.prototype.onComplete=function(){this.twicedownflag=!0,this.downscore.setiscompelet(this.twicedownflag),this.shp.$setVisible(!1),this.removeChild(this.su),this.paw.setDownscore(),this.paw.setisWin(0)},e.prototype.setpawcomplete=function(){var t=this.paw.getisWin();1==t?(this.twicedownflag=!1,this.downscore.setiscompelet(this.twicedownflag)):0==t&&(this.twicedownflag=!0,this.downscore.setiscompelet(this.twicedownflag))},e.prototype.downpaws=function(){this.twicedownflag&&(this.paw.downpaw(),this.twicedownflag=!1,this.downscore.setiscompelet(this.twicedownflag))},e.prototype.setdownscore=function(t){this.downscore=t},e.prototype.setScroeGrade=function(t){for(var e=0;e<this.animales.length;e++)this.animales[e].setanimalitemtype(t);1==t?this.uppricepaw.texture=RES.getRes("gamebody_json.111"):2==t?this.uppricepaw.texture=RES.getRes("gamebody_json.221"):3==t&&(this.uppricepaw.texture=RES.getRes("gamebody_json.331"),this.pawprice=12)},e}(egret.Sprite);__reflect(GameMap.prototype,"GameMap");var AnimalItem=function(t){function e(e,i,s,o,a,h,n,r){var d=t.call(this)||this;return d.COPPERANIMALITEM=1,d.SILVERANIMALITEM=2,d.GOLDANIMALITEM=3,d.times=1,d.animalitemtype=e,d.scorenumber=i,d.scorenumberbase=i,d.animalstring=s,d.hit=a,d.times=o,d.id=r,n&&(d.gamemap=n),d.paw=h,d.addEventListener(egret.Event.ADDED_TO_STAGE,d.onAddToStage,d),d}return __extends(e,t),e.prototype.setAnimaltype=function(t){this.index=t},e.prototype.getanimaldownwith=function(){return this.animaldown.width},e.prototype.getanimaldownhight=function(){return this.animaldown.height+this.animalup.height},e.prototype.setanimalitemtype=function(t){this.animalitemtype=t,t==this.COPPERANIMALITEM?(1==this.times?this.animaldown.texture=RES.getRes("gamebody_json.tong"):this.animaldown.texture=RES.getRes("gamebody_json.tonggay"),this.score.x=this.animaldown.x+this.animaldown.width/8,this.score.y=this.animaldown.y-2,this.score.verticalAlign=egret.VerticalAlign.MIDDLE,this.score.size=35*this.times,this.score.fontFamily="SimHei",this.score.textColor=16777215,this.score.text=this.scorenumber,this.score.bold=!0,this.score.anchorOffsetX=this.score.width/2,this.score.anchorOffsetY=this.score.height/2):t==this.SILVERANIMALITEM?(1==this.times?this.animaldown.texture=RES.getRes("gamebody_json.yin"):this.animaldown.texture=RES.getRes("gamebody_json.yingay"),this.score.x=this.animaldown.x+this.animaldown.width/8,this.score.y=this.animaldown.y-2,this.score.verticalAlign=egret.VerticalAlign.MIDDLE,this.score.size=35*this.times,this.score.fontFamily="SimHei",this.score.textColor=16777215,this.score.text=this.scorenumber+"0",this.score.bold=!0,this.score.anchorOffsetX=this.score.width/2,this.score.anchorOffsetY=this.score.height/2):t==this.GOLDANIMALITEM&&(1==this.times?this.animaldown.texture=RES.getRes("gamebody_json.jin"):this.animaldown.texture=RES.getRes("gamebody_json.jingay"),this.score.x=this.animaldown.x+this.animaldown.width/8,this.score.y=this.animaldown.y-2,this.score.verticalAlign=egret.VerticalAlign.MIDDLE,this.score.size=35*this.times,this.score.fontFamily="SimHei",this.score.textColor=16777215,this.score.text=this.scorenumber+"00",this.score.bold=!0,this.score.anchorOffsetX=this.score.width/2,this.score.anchorOffsetY=this.score.height/2),this.scorenumberbase=this.score.text},e.prototype.onAddToStage=function(t){if(this.animalitemtype==this.COPPERANIMALITEM?1==this.times?this.animaldown=Utils.createBitmapByName("gamebody_json.tong"):this.animaldown=Utils.createBitmapByName("gamebody_json.tonggay"):this.animalitemtype==this.SILVERANIMALITEM?1==this.times?this.animaldown=Utils.createBitmapByName("gamebody_json.yin"):this.animaldown=Utils.createBitmapByName("gamebody_json.yingay"):this.animalitemtype==this.GOLDANIMALITEM&&(1==this.times?this.animaldown=Utils.createBitmapByName("gamebody_json.jin"):this.animaldown=Utils.createBitmapByName("gamebody_json.jingay")),this.animaldown.width=this.animaldown.width*this.times,this.animaldown.height=this.animaldown.height*this.times,this.addChild(this.animaldown),this.animaldown.anchorOffsetX=this.animaldown.width/2,this.animaldown.anchorOffsetY=this.animaldown.height/2,this.animalup=Utils.createBitmapByName(this.animalstring),this.addChild(this.animalup),this.animalup.width=this.animalup.width*this.times,this.animalup.height=this.animalup.height*this.times,this.animalup.anchorOffsetX=this.animalup.width/2,this.animalup.anchorOffsetY=this.animalup.height/2,this.animaldown.x=this.animaldown.width/2,this.animalup.x=this.animaldown.x,this.animalup.y=67*this.times+this.animaldown.height/3.5,this.animaldown.y=134*this.times+this.animaldown.height/1.8,this.score=new egret.TextField,this.score.x=this.animaldown.x+this.animaldown.width/8,this.score.y=this.animaldown.y-2,this.score.verticalAlign=egret.VerticalAlign.MIDDLE,this.score.size=35*this.times,this.score.fontFamily="SimHei",this.score.textColor=16777215,this.score.text=this.scorenumber,this.score.bold=!0,this.score.anchorOffsetX=this.score.width/2,this.score.anchorOffsetY=this.score.height/2,this.addChild(this.score),1==this.times){var e=1,i=90,s=0,o=.7,a=16,h=16,n=1.2,r=1,d=!1,l=!1,g=new egret.DropShadowFilter(e,i,s,o,a,h,n,r,d,l);this.score.filters=[g],this.hit&&this.addEventListener(egret.Event.ENTER_FRAME,this.setAnimalhit,this)}else this.score.textColor=1728053247},e.prototype.setAnimalhit=function(){this.point=this.paw.getChildAt(2).localToGlobal();var t=this.point.x,e=this.point.y,i=this.animalup.hitTestPoint(t,e,!1);i&&this.gamemap.hitAnmial(this.index,t,e)},e.prototype.addlistener=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.setAnimalhit,this)},e.prototype.removerlistener=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.setAnimalhit,this)},e}(egret.Sprite);__reflect(AnimalItem.prototype,"AnimalItem");var DownScoreHook=function(t){function e(e){var i=t.call(this)||this;return i.COPPERANIMALITEM=3,i.SILVERANIMALITEM=2,i.GOLDANIMALITEM=1,i.hooktype=e,i.hooktype==i.COPPERANIMALITEM?i.scorestring="10":i.hooktype==i.SILVERANIMALITEM?i.scorestring="100":i.hooktype==i.GOLDANIMALITEM&&(i.scorestring="1000"),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(e,t),e.prototype.onAddToStage=function(t){this.hookgay=Utils.createBitmapByName("gamebody_json.icon24"),this.addChild(this.hookgay),this.hookgay.anchorOffsetX=this.hookgay.width/2,this.hookgay.anchorOffsetY=this.hookgay.height/2,this.hookselect=Utils.createBitmapByName("gamebody_json.icon25"),this.addChild(this.hookselect),this.hooktype!=this.COPPERANIMALITEM&&this.hookselect.$setVisible(!1),this.hookselect.anchorOffsetX=this.hookselect.width/2,this.hookselect.anchorOffsetY=this.hookselect.height/2,this.hooktype==this.COPPERANIMALITEM?this.hook=Utils.createBitmapByName("gamebody_json.icon15"):this.hooktype==this.SILVERANIMALITEM?this.hook=Utils.createBitmapByName("gamebody_json.icon17"):this.hooktype==this.GOLDANIMALITEM&&(this.hook=Utils.createBitmapByName("gamebody_json.icon16")),this.addChild(this.hook),this.hook.anchorOffsetX=this.hook.width/2,this.hookselect.x=this.hookgay.x,this.hookselect.y=this.hookgay.y,this.hook.x=this.hookgay.x,this.hook.y=this.hookgay.y-this.hookgay.height/2,this.score=new egret.TextField,this.score.verticalAlign=egret.VerticalAlign.BOTTOM,this.score.size=20,this.score.fontFamily="SimHei",this.score.textColor=16777215,this.score.text=this.scorestring,this.score.anchorOffsetX=this.score.width/2,this.score.anchorOffsetY=this.score.height/2,this.score.x=this.hookgay.x,this.score.y=this.hookgay.y+.8*this.score.height,this.addChild(this.score)},e.prototype.setselecthook=function(t){this.hookselect.$setVisible(t)},e.prototype.getselectwidth=function(){return this.hookselect.width},e}(egret.Sprite);__reflect(DownScoreHook.prototype,"DownScoreHook");var Ease=egret.Ease,Game=function(t){function e(){var e=t.call(this)||this;return e._url=window.location.href,e.httphead="http://app.api.kkxiu.com",e.isRestGame=!1,e.updownflag=!0,window.platformInstance=e,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){var e=this.GetRequest();this.token=e.token,this._vuid=e.uid,this.deviceno=e.deviceno+"",this.isfit=e.isfit+"",this.roomid=e.roomid+"","undefined"!=typeof e.httphead&&e.httphead.length>0?(this.httphead=e.httphead+"",this.apxlist=this.httphead+"/game/zww/GetConfig.ashx"):this.apxlist=this.httphead+"/game/zww/GetConfig.ashx",localStorage.setItem("token",JSON.stringify(this.token)),localStorage.setItem("uid",JSON.stringify(this._vuid)),localStorage.setItem("deviceno",JSON.stringify(this.deviceno)),localStorage.setItem("isfit",JSON.stringify(this.isfit)),localStorage.setItem("roomid",JSON.stringify(this.roomid)),this.isRestGame=!0,this.setRequestScore(this._vuid,this.token)},e.prototype.GetRequest=function(){var t=this._url.indexOf("?"),e=this._url.substring(t),i=decodeURIComponent(e),s=new Object;if(console.log(i.indexOf("?")),-1!=i.indexOf("?")){var o=i.substr(1),a=o.split("&");console.log(a);for(var h=0;h<a.length;h++)s[a[h].split("=")[0]]=unescape(a[h].split("=")[1])}return s},e.prototype.setRequestScore=function(t,e){var i=Date.parse((new Date).toString())/1e3,s="uid="+t+"&token="+e+"&encry=0&time="+i,o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,console.log(this.apxlist+s),o.open(this.apxlist,egret.HttpMethod.POST),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s),o.addEventListener(egret.Event.COMPLETE,this.onPostCompleteScore,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOErrorScore,this)},e.prototype.onPostCompleteScore=function(t){var e=t.currentTarget,i=JSON.parse(e.response);1==i.rescode&&(this.isRestGame?(this.result=i,this.bg=new GameBackGround(i),this.addChild(this.bg),this.paw=new Paw(this._vuid,this.token,this.roomid,this.httphead),this.addChild(this.paw),this.map=new GameMap(this,this.paw,i),this.paw.setgamemap(this.map),this.addChild(this.map),this.downscore=new DownScore(this.paw,this.map,this.bg,i),this.addChild(this.downscore),this.map.setdownscore(this.downscore),this.paw.setDownScore(this.downscore),this.bg.setpaw(this.paw),this.bg.setgamemap(this.map),toCompleteGame()):this.downscore.setmoney(i.result.cumoney))},e.prototype.onPostIOErrorScore=function(t){console.log("post error : "+t)},e.prototype.refurbishScore=function(){this.isRestGame=!1,this.setRequestScore(this._vuid,this.token)},e.prototype.refurshGame=function(){this.isRestGame=!0,this.removeChildren(),this.setRequestScore(this._vuid,this.token)},e.prototype.updownglideGame=function(){this.updownflag?(this.updownflag=!1,this.map.isPawin&&this.$setVisible(!1),this.hitmove()):(this.map.isPawin=!1,this.updownflag=!0,this.showmove(),this.$setVisible(!0))},e.prototype.hitmove=function(){egret.Tween.get(this.paw).to({y:-400},300,Ease.quadInOut),egret.Tween.get(this.bg).to({y:400},300,Ease.quadInOut),egret.Tween.get(this.map).to({y:400},300,Ease.quadInOut),egret.Tween.get(this.downscore).to({y:400},300,Ease.quadInOut),hitGameCompleteGame("1")},e.prototype.showmove=function(){this.paw.y=0,this.bg.y=0,this.map.y=0,this.downscore.y=0,showGameCompleteGame("1")},e.prototype.rightleftGame=function(){},e.prototype.setSeerenSize=function(t,e){"undefined"!=typeof this.result&&null!=this.result&&(this.removeChildren(),this.stage.setContentSize(this.stage.stageWidth,e/t*this.stage.stageWidth),Utils.stageWith=this.stage.stageWidth,Utils.stageHeight=this.stage.stageHeight,this.bg=new GameBackGround(this.result),this.addChild(this.bg),this.paw=new Paw(this._vuid,this.token,this.roomid,this.httphead),this.addChild(this.paw),this.map=new GameMap(this,this.paw,this.result),this.paw.setgamemap(this.map),this.addChild(this.map),this.downscore=new DownScore(this.paw,this.map,this.bg,this.result),this.addChild(this.downscore),this.map.setdownscore(this.downscore),this.paw.setDownScore(this.downscore),this.bg.setpaw(this.paw),this.bg.setgamemap(this.map))},e}(egret.DisplayObjectContainer);__reflect(Game.prototype,"Game");var GameBackGround=function(t){function e(e){var i=t.call(this)||this;return i.animal=["gamebody_json.icon2gay","gamebody_json.icon10gay","gamebody_json.icon13gay","gamebody_json.icon11gay","gamebody_json.icon12gay","gamebody_json.icon6gay","gamebody_json.icon5gay","gamebody_json.icon7gay","gamebody_json.icon8gay","gamebody_json.icon9gay","gamebody_json.icon3gay","gamebody_json.icon4gay"],i.animales=new Array,i.speed=.15,i.timeOnEnterFrame=0,i.requestanimallist=e.result.itemlist,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(e,t),e.prototype.setpaw=function(t){this.paw=t},e.prototype.setgamemap=function(t){this.gamemap=t},e.prototype.onAddToStage=function(t){this.rechargebottn=new egret.Shape,this.rechargebottn.graphics.beginFill(0,1),this.rechargebottn.graphics.drawRect(0,Utils.stageHeight-59,300,50),this.rechargebottn.graphics.endFill(),this.addChild(this.rechargebottn),this.rechargebottn.alpha=1,this.rechargebottn.touchEnabled=!0,this.rechargebottn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rechargeMeth,this),this.bgdown=Utils.createBitmapByName("gamebody_json.icon1"),this.addChild(this.bgdown),this.bgdown.y=Utils.stageHeight-279+this.bgdown.height/2,this.bgdown.x=this.bgdown.width/2,this.bgdown.anchorOffsetX=this.bgdown.width/2,this.bgdown.anchorOffsetY=this.bgdown.height/2,this.bgup=Utils.createBitmapByName("gamebody_json.icon20"),this.addChild(this.bgup),this.bgup.anchorOffsetX=this.bgup.width/2,this.bgup.anchorOffsetY=this.bgup.height/2,this.bgup.y=this.bgdown.y-this.bgdown.height/2-this.bgup.height/2,this.bgup.x=this.bgup.width/2;for(var e=0;e<this.animal.length;e++){var i=new AnimalItem(1,this.requestanimallist[e].itemprice,this.animal[e],.7,!1,null,null,this.requestanimallist[e].itemid);this.addChild(i),i.y=Utils.stageHeight-394,i.x=i.getanimaldownwith()*e,this.animales.push(i)}this.startX=this.animales[0].x,this.endY=this.animales[this.animales.length-1].x+this.animales[this.animales.length-1].width,this.addEventListener(egret.Event.ENTER_FRAME,this.moveAnimal,this),this.timeOnEnterFrame=egret.getTimer()},e.prototype.rechargeMeth=function(){torechargeScore("0")},e.prototype.moveAnimal=function(){for(var t=egret.getTimer(),e=this.timeOnEnterFrame,i=t-e,s=0;s<this.animales.length;s++)if(this.animales[s].x-=this.speed*i,this.animales[s].x<=this.startX-300){var o=this.startX-this.animales[s].x;this.animales[s].x=this.endY-o}this.timeOnEnterFrame=egret.getTimer()},e.prototype.setScroeGrade=function(t){for(var e=0;e<this.animales.length;e++)this.animales[e].setanimalitemtype(t)},e}(egret.Sprite);__reflect(GameBackGround.prototype,"GameBackGround");var GameBackGrounds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(GameBackGrounds.prototype,"GameBackGrounds");var DownScore=function(t){function e(e,i,s,o){var a=t.call(this)||this;return a.hooklist=new Array,a.paw=e,a.gamemap=i,a.bground=s,a.requestanimallist=parseInt(o.result.cumoney),a.addEventListener(egret.Event.ADDED_TO_STAGE,a.onAddToStage,a),a}return __extends(e,t),e.prototype.onAddToStage=function(t){this.start=Utils.createBitmapByName("gamebody_json.icon22"),this.addChild(this.start),this.start.anchorOffsetX=this.start.width/2,this.start.anchorOffsetY=this.start.height/2,this.start.x=Utils.stageWith-this.start.width/2-10,this.start.y=Utils.stageHeight-this.start.height/2-10,this.start.touchEnabled=!0,this.start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectstart,this),this.recharge=new egret.TextField,this.recharge.verticalAlign=egret.VerticalAlign.TOP,this.recharge.size=27,this.recharge.fontFamily="SimHei",this.recharge.textColor=16760378,this.recharge.text="充值  >",this.recharge.anchorOffsetX=this.recharge.width/2,this.recharge.anchorOffsetY=this.recharge.height/2,this.recharge.x=this.recharge.width/2+20,this.recharge.y=Utils.stageHeight-this.start.height/2-5,this.addChild(this.recharge),this.money=new egret.TextField,this.money.verticalAlign=egret.VerticalAlign.TOP,this.money.size=30,this.money.fontFamily="SimHei",this.money.textColor=16760378,this.money.text=this.requestanimallist+"",this.money.anchorOffsetX=this.money.width/2,this.money.anchorOffsetY=this.money.height/2,this.money.x=this.recharge.width+this.money.width/2+20,this.money.y=Utils.stageHeight-this.start.height/2-5,this.addChild(this.money),this.moneyicon=Utils.createBitmapByName("gamebody_json.312"),this.addChild(this.moneyicon),this.moneyicon.anchorOffsetX=this.moneyicon.width/2,this.moneyicon.anchorOffsetY=this.moneyicon.height/2,this.moneyicon.x=this.recharge.width+this.money.width+this.moneyicon.width+10,this.moneyicon.y=Utils.stageHeight-this.moneyicon.height/2-10;for(var e=1;4>e;e++){var i=new DownScoreHook(e);this.addChild(i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selecthook,this),i.x=this.start.x-i.getselectwidth()*e-50,i.y=this.start.y+5,this.hooklist.push(i)}},e.prototype.selectstart=function(){this.gamemap.downpaws()},e.prototype.setmoney=function(t){this.requestanimallist=parseInt(t),this.money.text=t+"",this.money.anchorOffsetX=this.money.width/2,this.money.anchorOffsetY=this.money.height/2,this.money.x=this.recharge.width+this.money.width/2+20,this.moneyicon.x=this.recharge.width+this.money.width+this.moneyicon.width+10},e.prototype.selecthook=function(t){for(var e=0;e<this.hooklist.length;e++)this.hooklist[e].setselecthook(!1);t.target.setselecthook(!0),1==t.target.hooktype?(this.gamemap.setScroeGrade(3),this.bground.setScroeGrade(3),this.paw.selectPaw(3)):2==t.target.hooktype?(this.gamemap.setScroeGrade(2),this.bground.setScroeGrade(2),this.paw.selectPaw(2)):3==t.target.hooktype&&(this.gamemap.setScroeGrade(1),this.bground.setScroeGrade(1),this.paw.selectPaw(1))},e.prototype.setiscompelet=function(t){for(var e=0;e<this.hooklist.length;e++)this.hooklist[e].touchEnabled=t;t?this.start.texture=RES.getRes("gamebody_json.icon22"):this.start.texture=RES.getRes("gamebody_json.gaystart")},e}(egret.Sprite);__reflect(DownScore.prototype,"DownScore");var GameMaps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(GameMaps.prototype,"GameMaps");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return window.platform=e,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){getScreen(),this.game=new Game,this.addChild(this.game),this.shp=new egret.Shape,this.shp.graphics.beginFill(0,1),this.shp.graphics.drawRect(0,0,Utils.stageWith,Utils.stageHeight+500),this.shp.graphics.endFill(),this.addChild(this.shp),this.shp.alpha=1,this.game.mask=this.shp},e.prototype.setScreenSize=function(t,e){this.stage.setContentSize(this.stage.stageWidth,e/t*this.stage.stageWidth),Utils.stageWith=this.stage.stageWidth,Utils.stageHeight=this.stage.stageHeight},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var Paw=function(t){function e(e,i,s,o){var a=t.call(this)||this;return a.pawtype=1,a.iswin=0,a.uid=e,a.token=i,a.roomid=s,a.httphead=o,a.getresult=a.httphead+"/game/zww/GetResult.ashx",a.betmoneys=a.httphead+"/game/zww/BetMoney.ashx",console.log(a.httphead),a.addEventListener(egret.Event.ADDED_TO_STAGE,a.onAddToStage,a),a}return __extends(e,t),e.prototype.onAddToStage=function(t){this.pawcenter=Utils.createBitmapByName("gamebody_json.122"),this.addChild(this.pawcenter),this.pawup=Utils.createBitmapByName("gamebody_json.121"),this.addChild(this.pawup),this.pawcenter.anchorOffsetX=this.pawcenter.width/2,this.pawcenter.x=Utils.stageWith/2,this.pawcenter.y=this.pawup.height,this.pawcenter.height=100,this.pawup.anchorOffsetX=this.pawup.width/2,this.pawup.anchorOffsetY=this.pawup.height/2,this.pawup.x=Utils.stageWith/2,this.pawup.y=this.pawup.height/2,this.skeletonData=RES.getRes("skeleton_json"),this.textureData=RES.getRes("texture_json"),this.texture=RES.getRes("texture_png"),this.factory=new dragonBones.EgretFactory,this.factory.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(this.skeletonData)),this.factory.addTextureAtlas(new dragonBones.EgretTextureAtlas(this.texture,this.textureData)),this.armature=this.factory.buildArmature("begin"),this.pawdown=this.armature.getDisplay(),this.dragonBonesWorldClock=dragonBones.WorldClock.clock,this.dragonBonesWorldClock.add(this.armature),this.addChild(this.pawdown),this.pawdown.x=Utils.stageWith/2-1,this.pawdown.y=this.pawdown.height/2+200},e.prototype.setgamemap=function(t){this.gamemap=t},e.prototype.downpaw=function(){this.getRequestbetmoney(this.uid,this.token,this.pawtype)},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,this.dragonBonesWorldClock.advanceTime(i/2500),!1},e.prototype.nopawhitanimal=function(){this.nopawhitflag&&(this.armature.animation.timeScale=-1,this.armature.animation.gotoAndStopByProgress("newAnimation",-1),egret.Tween.removeAllTweens(),egret.Tween.get(this.pawcenter).to({height:100},2500,egret.Ease.sineOut),egret.Tween.get(this.pawdown).to({y:this.pawdown.height/2+200},2500,egret.Ease.sineOut).call(this.complienopaw,this,[]))},e.prototype.complienopaw=function(){this.gamemap.setpawcomplete()},e.prototype.pawhitanimal=function(t){this.nopawhitflag=!1,this.getRequestretuset(this.uid,this.token,this.gameid,t,this.roomid),this.armature.animation.timeScale=-1,this.stateanimat=this.armature.animation.gotoAndStopByProgress("newAnimation",.2),egret.Tween.removeAllTweens(),egret.Tween.get(this.pawcenter).to({height:100},2500,egret.Ease.sineOut),egret.Tween.get(this.pawdown).to({y:this.pawdown.height/2+200},2500,egret.Ease.sineOut).call(this.compliepaw,this,[])},e.prototype.compliepaw=function(){this.gamemap.setpawcomplete(),this.armature.animation.gotoAndStopByProgress("newAnimation",-1)},e.prototype.selectPaw=function(t){this.pawtype=t,1==t?(this.dragonBonesWorldClock.clear(),egret.stopTick(this.onTicker,this),this.removeChild(this.pawdown),this.pawup.texture=RES.getRes("gamebody_json.121"),this.pawcenter.texture=RES.getRes("gamebody_json.122"),this.skeletonData=RES.getRes("skeleton_json"),this.textureData=RES.getRes("texture_json"),this.texture=RES.getRes("texture_png"),this.factory=new dragonBones.EgretFactory,this.factory.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(this.skeletonData)),this.factory.addTextureAtlas(new dragonBones.EgretTextureAtlas(this.texture,this.textureData)),this.armature=this.factory.buildArmature("begin"),this.pawdown=this.armature.getDisplay(),this.dragonBonesWorldClock.add(this.armature),this.addChild(this.pawdown),this.pawdown.x=Utils.stageWith/2-1,this.pawdown.y=this.pawdown.height/2+200):2==t?(this.dragonBonesWorldClock.clear(),egret.stopTick(this.onTicker,this),this.removeChild(this.pawdown),this.pawup.texture=RES.getRes("gamebody_json.120"),this.pawcenter.texture=RES.getRes("gamebody_json.124"),this.skeletonData=RES.getRes("skeleton_json30yin"),this.textureData=RES.getRes("texture_json30yin"),this.texture=RES.getRes("texture_png30yin"),this.factory=new dragonBones.EgretFactory,this.factory.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(this.skeletonData)),this.factory.addTextureAtlas(new dragonBones.EgretTextureAtlas(this.texture,this.textureData)),this.armature=this.factory.buildArmature("begin"),this.pawdown=this.armature.getDisplay(),this.dragonBonesWorldClock.add(this.armature),this.addChild(this.pawdown),this.pawdown.x=Utils.stageWith/2-1,this.pawdown.y=this.pawdown.height/2+200):3==t&&(this.dragonBonesWorldClock.clear(),egret.stopTick(this.onTicker,this),this.removeChild(this.pawdown),this.pawup.texture=RES.getRes("gamebody_json.125"),this.pawcenter.texture=RES.getRes("gamebody_json.123"),this.skeletonData=RES.getRes("skeleton_json30"),this.textureData=RES.getRes("texture_json30"),this.texture=RES.getRes("texture_png30"),this.factory=new dragonBones.EgretFactory,this.factory.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(this.skeletonData)),this.factory.addTextureAtlas(new dragonBones.EgretTextureAtlas(this.texture,this.textureData)),this.armature=this.factory.buildArmature("begin"),this.pawdown=this.armature.getDisplay(),this.dragonBonesWorldClock.add(this.armature),this.addChild(this.pawdown),this.pawdown.x=Utils.stageWith/2-1,this.pawdown.y=this.pawdown.height/2+200)},e.prototype.getRequestbetmoney=function(t,e,i){var s;if(1==i?s=10:2==i?s=100:3==i&&(s=1e3),s>this.downscore.requestanimallist)return void torechargeScore("1");var o=Date.parse((new Date).toString())/1e3,a="uid="+t+"&token="+e+"&encry=0&betmoney="+s+"&time="+o,h=new egret.HttpRequest;h.responseType=egret.HttpResponseType.TEXT,console.log(this.betmoneys+a),h.open(this.betmoneys,egret.HttpMethod.POST),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(a),h.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),h.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this)},e.prototype.onPostComplete=function(t){var e=t.currentTarget,i=JSON.parse(e.response);1==i.rescode?(this.gameid=i.result.gameid,this.cumoney=i.result.cumoney,toOnChangeScore(this.cumoney),this.downscore.setmoney(this.cumoney),this.nopawhitflag=!0,this.pawcenter.height=100,this.pawdown.y=this.pawdown.height/2+200,egret.Tween.removeAllTweens(),egret.Tween.get(this.pawcenter).to({height:Utils.stageHeight-354},1500,egret.Ease.sineIn),egret.Tween.get(this.pawdown).to({y:this.pawdown.height/2+Utils.stageHeight-254},1500,egret.Ease.sineIn).call(this.nopawhitanimal,this,[]),this.armature.animation.timeScale=1,this.armature.animation.gotoAndPlay("newAnimation"),this.armature.duration=2.5,egret.startTick(this.onTicker,this)):-2==i.rescode&&(this.cumoney=i.result.cumoney,this.downscore.setmoney(this.cumoney),torechargeScore("1"))
},e.prototype.onPostIOError=function(t){console.log("post error : "+t)},e.prototype.getRequestretuset=function(t,e,i,s,o){var a=Date.parse((new Date).toString())/1e3,h="uid="+t+"&token="+e+"&encry=0&gameid="+i+"&itemid="+s+"&roomid="+o+"&time="+a,n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,console.log(this.getresult+h),n.open(this.getresult,egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(h),n.addEventListener(egret.Event.COMPLETE,this.onPostCompleteScore,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOErrorScore,this)},e.prototype.onPostCompleteScore=function(t){var e=t.currentTarget,i=JSON.parse(e.response);1==i.rescode?(this.iswin=i.result.iswin,this.resultcumoney=i.result.cumoney,toOnChangeScore(this.resultcumoney),i.result.awardmsg&&(this.awardmsg=JSON.stringify(i.result.awardmsg))):this.iswin=0},e.prototype.sendapp=function(){toprizeScore(this.awardmsg)},e.prototype.setDownscore=function(){this.downscore.setmoney(this.resultcumoney)},e.prototype.onPostIOErrorScore=function(t){console.log("post error : "+t)},e.prototype.getisWin=function(){return this.iswin},e.prototype.setisWin=function(t){this.iswin=t},e.prototype.setDownScore=function(t){this.downscore=t},e}(egret.Sprite);__reflect(Paw.prototype,"Paw");var SuccessAnimals=function(t){function e(e,i,s,o){var a=t.call(this)||this;return a.COPPERANIMALITEM=1,a.SILVERANIMALITEM=2,a.GOLDANIMALITEM=3,a.times=1,a.animalitemtype=e,a.scorenumber=i,a.animalstring=s,a.times=o,a.addEventListener(egret.Event.ADDED_TO_STAGE,a.onAddToStage,a),a}return __extends(e,t),e.prototype.onAddToStage=function(t){this.bg=Utils.createBitmapByName("gamebody_json.icon23"),this.addChild(this.bg),this.bg.width=this.bg.width*this.times,this.bg.height=this.bg.height*this.times,this.bg.anchorOffsetX=this.bg.width/2,this.bg.anchorOffsetY=this.bg.height/2,egret.Tween.get(this.bg,{loop:!0}).to({scaleX:0,scaleY:0},300,egret.Ease.backOut).to({scaleX:1,scaleY:1},500,egret.Ease.sineIn),this.animalitemtype==this.COPPERANIMALITEM?this.animaldown=Utils.createBitmapByName("gamebody_json.tong"):this.animalitemtype==this.SILVERANIMALITEM?this.animaldown=Utils.createBitmapByName("gamebody_json.yin"):this.animalitemtype==this.GOLDANIMALITEM&&(this.animaldown=Utils.createBitmapByName("gamebody_json.jin")),this.animaldown.width=this.animaldown.width*this.times,this.animaldown.height=this.animaldown.height*this.times,this.addChild(this.animaldown),this.animaldown.anchorOffsetX=this.animaldown.width/2,this.animaldown.anchorOffsetY=this.animaldown.height/2,this.animalup=Utils.createBitmapByName(this.animalstring),this.addChild(this.animalup),this.congratulations=Utils.createBitmapByName("gamebody_json.icon21"),this.addChild(this.congratulations),this.congratulations.width=this.congratulations.width*this.times,this.congratulations.height=this.congratulations.height*this.times,this.congratulations.anchorOffsetX=this.congratulations.width/2,this.congratulations.anchorOffsetY=this.congratulations.height/2,this.animalup.width=this.animalup.width*this.times,this.animalup.height=this.animalup.height*this.times,this.animalup.anchorOffsetX=this.animalup.width/2,this.animalup.anchorOffsetY=this.animalup.height/2,this.animaldown.x=this.animaldown.width/2,this.animalup.x=this.animaldown.x,this.bg.x=this.animaldown.x,this.congratulations.x=this.animaldown.x,this.bg.y=(this.animaldown.height+this.animalup.height)/2,this.animalup.y=67*this.times+this.animaldown.height/3.5,this.animaldown.y=134*this.times+this.animaldown.height/1.8,this.congratulations.y=this.animaldown.y+this.animaldown.height/1.8,this.score=new egret.TextField,this.score.x=this.animaldown.x+this.animaldown.width/8,this.score.y=this.animaldown.y-2,this.score.verticalAlign=egret.VerticalAlign.MIDDLE,this.score.size=35*this.times,this.score.fontFamily="SimHei",this.score.textColor=16777215,this.score.text=this.scorenumber,this.score.bold=!0,this.score.anchorOffsetX=this.score.width/2,this.score.anchorOffsetY=this.score.height/2,this.addChild(this.score);var e=1,i=90,s=0,o=.7,a=16,h=16,n=1.2,r=1,d=!1,l=!1,g=new egret.DropShadowFilter(e,i,s,o,a,h,n,r,d,l);this.score.filters=[g]},e.prototype.getanimalbgwith=function(){return this.bg.width},e.prototype.getanimalbghight=function(){return this.bg.height},e}(egret.Sprite);__reflect(SuccessAnimals.prototype,"SuccessAnimals");var Utils=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.stageHeight=1334,t.stageWith=750,t}();__reflect(Utils.prototype,"Utils");